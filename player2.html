<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Reproductor con DVR</title>

    <!-- Bootstrap icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Estilos -->
    <link rel="stylesheet" href="styleplayers.css" />

    <!-- Librerías HLS / Shaka -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.3/shaka-player.compiled.js"></script>
  </head>
  <body>
    <!-- VIDEO + SPINNER -->
    <div id="player-container">
      <video
        id="player-video"
        autoplay
        playsinline
        crossorigin="anonymous"
      ></video>
      <div id="video-loading-spinner" class="spinner hidden"></div>
    </div>

    <!-- PLAYLIST (oculto hasta invocación por TV-GUIDE) -->
    <div id="playlist-container">
      <div class="carousel-wrapper">
        <div class="carousel-list" id="carouselList"></div>
      </div>
    </div>

    <!-- MENÚ TV (Overlay) -->
    <div id="tv-menu" class="tv-menu hidden" aria-hidden="true" role="dialog">
      <!-- TOP -->
      <div class="tv-menu-top">
        <div class="tv-menu-top-left">
          <button
            id="btn-close"
            class="circle-btn"
            aria-label="Cerrar reproductor"
            tabindex="0"
            data-title="Cerrar"
          >
            <i class="bi bi-x"></i>
          </button>
        </div>
        <div class="tv-menu-top-right">
          <div class="tv-menu-time" id="tv-menu-time" aria-live="polite">
            <i class="bi bi-clock-fill"></i>&nbsp;<span id="tv-menu-time-text"
              >12:00</span
            >
          </div>
        </div>
      </div>

      <!-- CENTER-LEFT: logo y flechas -->
      <div class="tv-menu-center-left">
        <div class="arrow-up float-arrow" aria-hidden="true">
          <i class="bi bi-chevron-up"></i>
        </div>
        <div class="channel-logo-wrap">
          <img id="channel-logo" class="channel-logo" src="" alt="Logo canal" />
        </div>
        <div class="arrow-down float-arrow" aria-hidden="true">
          <i class="bi bi-chevron-down"></i>
        </div>
      </div>

      <!-- BOTTOM -->
      <div class="tv-menu-bottom">
        <div class="tv-menu-bottom-left">
          <div class="live-badge">LIVE</div>
          <div id="tv-menu-channel-title" class="channel-title">Canal</div>
          <div id="tv-menu-channel-number" class="channel-number">000</div>
        </div>

        <div class="tv-menu-bottom-center">
          <button
            id="btn-playpause"
            class="circle-btn"
            aria-label="Play/Pausa"
            tabindex="0"
            data-title="Pausa"
          >
            <i id="icon-playpause" class="bi bi-pause-fill"></i>
          </button>
        </div>

        <div class="tv-menu-bottom-right">
          <button
            id="btn-audio"
            class="rect-plain"
            aria-label="Idioma"
            tabindex="0"
            data-title="Idioma"
          >
            <i class="bi bi-volume-up-fill" aria-hidden="true"></i>
            <span id="audio-label" class="audio-label">ENG</span>
          </button>

          <button
            id="btn-guide"
            class="circle-plain"
            aria-label="Guía TV"
            tabindex="0"
            data-title="Guía TV"
          >
            <i class="bi bi-view-list"></i>
          </button>

          <button
            id="btn-res"
            class="small-btn no-focus"
            aria-label="Resolución"
            tabindex="-1"
            aria-hidden="true"
          >
            <i id="icon-res" class="bi bi-badge-hd-fill"></i>
          </button>
        </div>
      </div>

      <div
        id="tv-menu-tooltip"
        class="tv-menu-tooltip hidden"
        aria-hidden="true"
      ></div>
    </div>

    <!-- Audio dropdown (separado para no desenfocar el video) -->
    <div
      id="audio-dropdown"
      class="audio-dropdown hidden"
      role="menu"
      aria-hidden="true"
    >
      <button class="audio-opt" data-val="0" tabindex="-1">ENG</button>
      <button class="audio-opt" data-val="1" tabindex="-1">SPA</button>
    </div>

    <script src="player2.js"></script>
  </body>
</html>
