/* styleserie.css - actualizado con fuentes locales
   - Title: LEMONMILK (solo #movie-title-text)
   - Resto UI: Outfit (por defecto)
*/

/* --- Variables --- */
:root{
  --accent: #8a2be2;
  --accent-weak: rgba(138,43,226,0.18);
  --accent-weak-strong: rgba(138,43,226,0.28);

  --title-font: "LEMONMILK";
  --base-font: "Outfit";

  --title-size-vh: 6;
  --desc-font-size: 2.1;
  --content-padding-top: 11;
  --season-width: 120px;
  --season-height: 180px;
  --episode-width: 260px;
  --episode-height: 150px;
  --focus-border: 3px solid rgba(255,255,255,0.95);

  /* gap used in the seasons row; JS lee el gap computado */
  --season-gap: 1vh;
}

/* --- Local fonts --- */
@font-face{
  font-family: "LEMONMILK";
  src: url("../fonts/LEMONMILK-RegularItalic.woff2") format("woff2"),
       url("../fonts/LEMONMILK-RegularItalic.woff") format("woff");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}
@font-face{
  font-family: "Outfit";
  src: url("../fonts/Outfit-Regular.woff2") format("woff2"),
       url("../fonts/Outfit-Regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* --- Reset --- */
*{ box-sizing:border-box; }
html,body{
  height:100%;
  margin:0;
  padding:0;
  font-family: var(--base-font), "Arial", sans-serif;
  background:#000;
  color:#fff;
  overflow:hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* --- Background --- */
#background-section{
  position:fixed; inset:0;
  background-size:cover; background-position:center;
  transition:background-image .45s ease;
  z-index:-2;
}
#background-section::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(to right, rgba(18,17,36,0.92) 28%, rgba(0,0,0,0.28));
  pointer-events:none;
  z-index:0;
}
#imagen-1{ position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:-3; display:block; }
#imagen-2{ display:none; }

/* --- Back button & logo --- */
#back-button{
  position:absolute; top:18px; left:18px; z-index:1001;
  display:flex; align-items:center; justify-content:center;
  width:5vh; height:5vh; background:#fff; color:#000; border-radius:50%;
  text-decoration:none; transition: background .18s ease, color .18s ease;
  border: none;
}
#back-button:focus, #back-button:hover{
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(6px);
  color: #fff;
  outline: none;
}
#logo{ position:absolute; top:12px; right:12px; z-index:1001; width:7vh; }

/* --- Main layout --- */
#content{
  position:relative; z-index:2;
  display:flex; gap:6vw;
  height:100vh;
  padding: calc(var(--content-padding-top) * 1vh) 6vh 3vh 12vh;
  align-items:flex-start;
}

/* --- Columns --- */
#left-column{ width:44%; min-width:420px; display:flex; flex-direction:column; gap:1.4vh; align-items:flex-start; padding-top:1vh; }
#right-column{ min-width:0; max-height: calc(100vh - 6vh); display:flex; flex-direction:column; overflow:hidden; margin-left:auto; padding-left:1.5vw; }

/* Apply user's margin-bottom change: all children inside left-column = 1.5vh */
#left-column > * { margin-bottom: 1.5vh; }

/* --- TV label --- */
#tv-series-label{
  font-size:2.4vh;
  margin-bottom:1.5vh;
  color:#d9d9d9;
  font-family: var(--base-font), 'Ubuntu', sans-serif;
}
#tv-series-label strong{ font-weight:700; }

/* --- Title (USE LEMONMILK only for title) --- */
#movie-title-text{
  font-family: var(--title-font), var(--base-font), 'Ubuntu', sans-serif;
  font-size:calc(var(--title-size-vh) * 1vh);
  margin:0 0 1.5vh 0;
  color:#fff;
  font-weight:700;
  letter-spacing: -0.02em;
}

/* --- Genres --- */
#genero{ display:flex; gap:1vh; flex-wrap:wrap; margin-bottom:1.5vh; }
.genre{
  border:2px solid var(--accent);
  color:#fff; padding:.35vh .8vh; border-radius:12px; font-size:1.6vh;
  background: transparent; transition: background .18s ease, border-color .18s ease;
}
.genre:focus{ outline:none; box-shadow:none; border-color:#fff; }

/* --- Emdetails meta (season) --- */
.emdetails-meta{ display:flex; align-items:center; gap:.8vh; color:#cfcfcf; font-size:2vh; margin-bottom:1.5vh; }

/* --- Description --- */
.movie-description{ font-size:calc(var(--desc-font-size) * 1vh); color:#ddd; line-height:1.6; margin-bottom:1.5vh; max-width:100%; }
.movie-description p{ margin:0; text-align:justify; }

/* --- Rating-year inline --- */
.rating-year{ display:flex; align-items:center; gap:1.2vh; margin-bottom:1.5vh; color:#fff; font-size:1.9vh; }
/* Estrellas en blanco (solicitado) */
.movie-rating .stars ion-icon{ font-size:2.4vh; color:#fff; }
/* Número de rating al lado en blanco */
#rating-number{ color:#fff; font-size:2vh; font-weight:700; margin-left:.6vh; }

/* --- Buttons horizontal (Play / Donar / Favorito / Reportar) --- */
.button-movie-and-donation{ display:flex; align-items:center; gap:1.2vh; margin-bottom:2.2vh; }

/* Play pill -> ahora con fondo "gaussian" (transparente + blur) */
.movie-buttons a#video1{
  display:inline-flex; align-items:center; gap:.8vh;
  /* glass / gaussian-like background */
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 2px solid rgba(255,255,255,0.04);
  color:#fff; text-decoration:none;
  padding:.9vh 1.2vh; border-radius:999px; font-size:1.9vh; width:auto; min-width:0; justify-content:center;
  transition: background .18s ease, border-color .14s ease, box-shadow .14s ease;
  box-shadow: none;
}
.movie-buttons a#video1 .pill-icon{ font-weight:700; }

/* Focus más oscuro/visible para los botones (borde gris oscuro) */
.movie-buttons a#video1:focus,
.movie-buttons a#video1:hover{
  background: linear-gradient(180deg, rgba(0,0,0,0.3), rgba(0,0,0,0.22));
  border: 2px solid rgba(180,180,180,0.55);
  box-shadow: none;
  color:#fff;
  outline: none;
}

/* donar-and-actions horizontal & aligned with pill (glass background) */
.donar-and-actions{ display:flex; gap:.8vh; align-items:center; margin-left:6px; height:auto; }
.donar-and-actions .donar-button a{
  display:inline-flex; align-items:center; gap:.6vh; padding:.9vh 1.2vh; font-size:1.9vh;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 2px solid rgba(255,255,255,0.04);
  color:#fff; text-decoration:none; border-radius:20px; height:auto;
   box-shadow: none; transition: background .18s ease, border .14s ease;
}
.donar-and-actions .donar-button a:focus,
.donar-and-actions .donar-button a:hover{
  background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.2));
  border: 2px solid rgba(160,160,160,0.6);
  color:#fff; outline:none; box-shadow: none;
}

/* circular buttons (favorito / reportar) -> glass + focus oscuro */
.donar-and-actions .favorito-button a,
.donar-and-actions .reportar-button a{
  width:5vh; height:5vh; display:flex; align-items:center; justify-content:center;
  border-radius:50%;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 2px solid rgba(255,255,255,0.04);
  color:#fff; text-decoration:none; font-size:2vh;
  box-shadow:none; transition: background .18s ease, border .14s ease;
}
.donar-and-actions a:focus,
.donar-and-actions a:hover{
  background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.22));
  border: 2px solid rgba(160,160,160,0.6);
  backdrop-filter: blur(6px);
  box-shadow: none;
  outline:none;
}

/* --- Seasons horizontal (poster vertical) --- */
/* Contenedor principal de seasons: limitado para mostrar 3 cards cuando sea necesario */
#seasons-wrap{
  width:100%;
  margin-top:.6vh;
  position: relative;
  overflow: visible;
  /* por defecto dejamos control al hijo (#seasons-buttons) */
}

/* el contenedor de botones (fila) -- usamos max-width para que quepan 3 cards */
#seasons-buttons{
  display:flex; gap: var(--season-gap); align-items:center;
  padding: 12px 12px; margin:0;
  /* por defecto activamos overflow-x para cuando haya muchos */
  overflow-x: auto;
  -webkit-overflow-scrolling:touch;
  scroll-snap-type: x mandatory;
  white-space: nowrap;
  /* calculamos un ancho máximo para que quepan 3 tarjetas visibles */
  max-width: calc((var(--season-width) * 3) + (var(--season-gap) * 2) + 24px);
  /* prevent this flexbox from expanding parent width */
  box-sizing: border-box;
}

/* Si no queremos scroll (<=3 tarjetas) añadiremos clase .no-scroll en #seasons-wrap */
#seasons-wrap.no-scroll #seasons-buttons{
  overflow-x: visible;
  max-width: none;
  justify-content: flex-start;
}

/* elección visual: cada card sigue siendo fija y evita estirar la columna */
.season-btn{
  flex: 0 0 auto;
  width: var(--season-width);
  height: var(--season-height);
  border-radius: 10px;
  overflow: hidden;
  border: 2px solid transparent;
  background: #111;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; padding:0;
  transition: transform .18s ease, box-shadow .18s ease, border-color .12s ease;
  z-index: 2;
  scroll-snap-align: start;
}
.season-btn img{ width:100%; height:100%; object-fit:cover; display:block; }

/* estado seleccionado */
.season-btn.selected{
  transform: translateY(-6px) scale(1.02);
  border-color: rgba(138,43,226,0.85);
  box-shadow: 0 18px 40px rgba(12,12,12,0.6);
  z-index: 3;
}
/* foco visual limpio (sin zoom) -> borde blanco como pediste */
.season-btn:focus{ outline:none; box-shadow:none; transform:none; border:3px solid #fff; }

/* Scrollbar minimal (únicamente cuando hay scroll) */
#seasons-buttons::-webkit-scrollbar{ height:8px; }
#seasons-buttons::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,0.06);
  border-radius:8px;
  border: 2px solid rgba(0,0,0,0.2);
}

/* --- Episodes list vertical --- */
#episodes-header h3{ margin:0 0 .6vh 0; font-size:2.2vh; font-family: var(--base-font); }
/* make episodes list flexible and scrollable with transition when updating */
#episodes-list{
  flex: 1; /* important: allow column to scroll when tall */
  overflow-y:auto; padding-right:12px; display:flex; flex-direction:column; gap:1vh;
  scrollbar-width: thin; align-items:flex-start;
  max-height: calc(100vh - 12vh);

  /* transition for when episodes update */
  transition: transform .28s ease, opacity .28s ease;
}
#episodes-list.updating{ opacity: 0; transform: translateY(8px); pointer-events: none; }

/* modern, styled scrollbar for episodes column */
#episodes-list::-webkit-scrollbar{ width:12px; }
#episodes-list::-webkit-scrollbar-track{ background: rgba(255,255,255,0.02); border-radius:8px; margin:4px 0; }
#episodes-list::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(138,43,226,0.9), rgba(107,179,255,0.88));
  border-radius:8px;
  border: 2px solid rgba(0,0,0,0.2);
}
#episodes-list::-webkit-scrollbar-thumb:hover{ filter:brightness(.95); }

/* Firefox-ish */
#episodes-list{ scrollbar-color: rgba(138,43,226,0.8) rgba(255,255,255,0.02); }

/* --- Episode card (landscape: width > height) --- */
.episode-btn{
  position:relative; display:block; width:var(--episode-width); height:var(--episode-height);
  border-radius:10px; overflow:hidden; padding:0; border:2px solid transparent;
  background:#0a0a0a; cursor:pointer; transition: border-color .12s ease;
  align-self:flex-end;
  flex: 0 0 auto; /* prevent shrinking */
  min-height: var(--episode-height); /* ensure consistent height */
  box-sizing: border-box;
}
.episode-btn img{ width:100%; height:100%; object-fit:cover; display:block; }
.episode-btn:focus{ outline:none; border-color:#fff; box-shadow:none; transform:none; }
.episode-btn.playing{ border-color:#6fb3ff; box-shadow:none; }

/* epi badge upper-left */
.epi-badge{
  position:absolute; left:8px; top:8px; z-index:10;
  background: rgba(0,0,0,0.6); color:#fff; padding:.3vh .6vh; border-radius:6px;
  font-size:1.3vh; font-weight:700; border:1px solid rgba(255,255,255,0.06);
}

/* Progress bar inside card (full width, bottom) */
.card-progress-wrap{
  position:absolute; left:0; right:0; bottom:0; height:8px; z-index:20; background: rgba(255,255,255,0.06);
}
.card-progress-inner{
  display:block; height:100%; width:0%; background: linear-gradient(90deg,var(--accent),#6fb3ff); transition: width .25s linear;
}

/* --- When player active hide chrome (same behavior) --- */
body.player-active #background-section,
body.player-active #imagen-1,
body.player-active #left-column,
body.player-active #right-column{
  opacity:0; visibility:hidden; transform:translateY(10px) scale(.995); transition:opacity .35s ease, transform .35s;
}

/* --- Mobile overrides --- */
@media screen and (max-width:720px){
  html,body{ overflow:auto; height:auto; }
  #content{ flex-direction:column; padding-left:4vh; padding-right:4vh; padding-top:3vh; gap:2vh; height:auto; }
  #left-column, #right-column{ width:100%; min-width:0; }
  #imagen-1{ display:none } 
  #imagen-2{ display:block; position:fixed; inset:0; object-fit:cover; z-index:-2; }
  .season-btn{ width:120px; height:160px; }
  .episode-btn{ width:100%; height:160px; align-self:center; }
  .donar-and-actions{ margin-left:0; flex-wrap:wrap; }
  .movie-buttons a#video1{ width:80%; justify-content:center; padding:.9vh 1.8vh; }

  /* On mobile we don't apply the 3-card fixed viewport behavior, remove class effect */
  #seasons-wrap.no-scroll #seasons-buttons{ max-width: none; overflow-x: visible; }
}

/* --- Accessibility: visible focus for keyboard users (fallback) --- */
:focus { outline: none; }
:focus-visible { outline: none; box-shadow: none; }
